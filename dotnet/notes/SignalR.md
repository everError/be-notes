# SignalR 개요 문서

## 1. SignalR이란?

**SignalR**은 ASP.NET Core에서 제공하는 **실시간 웹 기능 구현을 위한 공식 라이브러리**이다.
클라이언트와 서버 간의 **양방향 통신(bidirectional communication)** 을 간단한 프로그래밍 모델로 제공하는 것이 목적이다.

SignalR은 WebSocket을 포함한 여러 전송 방식을 내부적으로 사용하며, 개발자는 저수준 네트워크 처리 없이 실시간 기능을 구현할 수 있다.

---

## 2. 주요 특징

### 2.1 실시간 양방향 통신

- 서버 → 클라이언트
- 클라이언트 → 서버
  모두 가능하며, 연결이 유지되는 동안 즉시 메시지를 전달할 수 있다.

---

### 2.2 자동 전송 방식 선택 (Transport Negotiation)

SignalR은 실행 환경에 따라 적절한 전송 방식을 자동으로 선택한다.

우선순위:

1. WebSocket
2. Server-Sent Events (SSE)
3. Long Polling

이 과정은 **Negotiation** 단계에서 자동으로 처리된다.

---

### 2.3 Hub 기반 프로그래밍 모델

SignalR은 **Hub**라는 개념을 중심으로 동작한다.

- Hub는 실시간 통신의 진입점
- 서버 메서드를 클라이언트에서 호출 가능
- 서버에서 클라이언트 메서드를 호출 가능

이는 메시지 기반 통신을 **RPC(Remote Procedure Call) 형태**로 추상화한 구조이다.

---

### 2.4 그룹 및 브로드캐스트 지원

- 연결(Connection)을 그룹(Group)으로 묶을 수 있음
- 특정 그룹 또는 전체 클라이언트에 메시지 전송 가능

주요 사용 사례:

- 채팅방
- 구독 기반 알림
- 특정 화면 사용자 대상 업데이트

---

### 2.5 자동 재연결 및 연결 관리

- 네트워크 장애 발생 시 재연결 지원
- 연결 상태 추적 가능
- Keep-alive 및 ping/pong 메커니즘 내장

---

## 3. 내부 구성 요소

### 3.1 Connection

- 각 클라이언트는 서버와 연결 시 고유한 Connection ID를 가진다.
- 연결이 끊겼다가 재연결되면 ID는 변경될 수 있다.

---

### 3.2 Hub

- 실시간 통신을 처리하는 서버 측 클래스
- HTTP Controller와 달리 **연결 기반**으로 동작

---

### 3.3 Protocol

- 메시지 직렬화 방식

  - JSON (기본)
  - MessagePack (옵션)

- SignalR 전용 메시지 프레임을 사용

---

### 3.4 Transport

- 실제 데이터 전송을 담당
- WebSocket, SSE, Long Polling 중 하나 사용

---

## 4. 확장 및 스케일 아웃

SignalR은 다중 서버 환경을 위한 확장 구조를 제공한다.

### 4.1 Backplane

- Redis 등을 사용하여 여러 서버 간 메시지 동기화
- 동일한 그룹/연결 정보 공유

---

### 4.2 관리형 서비스

- Azure SignalR Service 등
- 연결 관리와 스케일링을 외부 서비스에 위임 가능

---

## 5. 사용 사례

일반적으로 SignalR은 다음과 같은 기능 구현에 사용된다.

- 실시간 알림 시스템
- 채팅 애플리케이션
- 실시간 대시보드
- 협업 도구
- Blazor 기반 실시간 UI

---

## 6. 장점

- 저수준 네트워크 처리 불필요
- 생산성 높은 API 제공
- ASP.NET Core 인증/권한 시스템과 통합 가능
- 다양한 클라이언트(JavaScript, .NET, 모바일 등) 지원
- 연결 안정성 및 재연결 처리 내장

---

## 7. 한계 및 고려 사항

- Raw WebSocket 대비 오버헤드 존재
- SignalR 프로토콜에 종속됨
- 고빈도 대량 스트리밍에는 적합하지 않을 수 있음
- 메시지 구조 및 흐름에 대한 자유도가 제한됨

---

## 8. 다른 기술과의 관계

| 기술            | 역할                                    |
| --------------- | --------------------------------------- |
| Raw WebSocket   | 저수준 양방향 통신                      |
| SignalR         | WebSocket 기반 고수준 실시간 프레임워크 |
| gRPC Streaming  | 계약 기반 스트리밍 통신                 |
| Managed Pub/Sub | 인프라 중심 실시간 메시징               |

SignalR은 **저수준 통신과 완전 관리형 메시징 솔루션 사이의 중간 계층**에 위치한다.

---

## 9. 정리

SignalR은 ASP.NET Core 환경에서 실시간 통신을 구현하기 위한 **공식적이고 범용적인 솔루션**이다.
자동 전송 방식 선택, Hub 기반 RPC 모델, 그룹 관리 및 스케일 아웃 기능을 제공하여 다양한 실시간 웹 애플리케이션에 활용된다.
